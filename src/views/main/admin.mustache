<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{title}}</title>
    <link href="/node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="/css/style.css" rel="stylesheet" />
  </head>
  <body>
    {{#user}} {{> authHeader }} {{/user}} {{^user}} {{> header }} {{/user}}

    <div>{{title}}</div>

    {{> flash}}

    <div>
      {{#workshops}}
      <div class="workshop-entry">
        <h3>{{name}}</h3>
        <p>{{description}}</p>
        <p>{{numOfSessions}} sessions</p>
        <p>£ {{price}}</p>
        <p>Instructor: {{#organiser}}{{name}}{{/organiser}}</p>
        <div class="workshop-actions">
          <form action="/admin/workshop/edit/{{courseId}}" method="GET">
            <button type="submit" class="btn btn-danger">Edit Workshop</button>
          </form>

          <form action="/admin/workshop/delete/{{courseId}}" method="POST">
            <button type="submit" class="btn btn-danger">Delete Workshop</button>
          </form>

          <a href="/admin/workshop/{{courseId}}/enrolments" class="btn btn-sm btn-info">View Enrolments</a>
        </div>
      </div>
      {{/workshops}} {{^workshops}}
      <p>No workshops found</p>
      {{/workshops}}

      <div class="text-right">
        <a href="/admin/workshop/new" class="btn btn-primary">Add a Workshop</a>
      </div>
    </div>

    <div>
      {{#classes}}

      <div class="class-entry">
        <h3>Class Name: {{name}}</h3>
        <p>{{description}}</p>
        <p>{{schedule}}</p>
        <p>£ {{price}}</p>
        <p>Instructor: {{#organiser}}{{name}}{{/organiser}}</p>
        <div class="class-actions">
          <form action="/admin/class/edit/{{classId}}" method="GET">
            <button type="submit" class="btn btn-danger">Edit Class</button>
          </form>

          <form action="/admin/class/delete/{{classId}}" method="POST">
            <button type="submit" class="btn btn-danger">Delete Class</button>
          </form>

          <a href="/admin/class/{{classId}}/enrolments" class="btn btn-sm btn-info">View Enrolments</a>
        </div>
      </div>
      {{/classes}} {{^classes}}
      <p>No classes found</p>
      {{/classes}}

      <div class="text-right">
        <a href="/admin/class/new" class="btn btn-primary">Add a Class</a>
      </div>
    </div>

    <div class="container mt-4">
      <a href="/admin/organiser/new" class="btn btn-primary mb-3">Add New Organiser</a>

      <table class="table table-striped">
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {{#organisers}}
          <tr>
            <td>{{name}}</td>
            <td>{{email}}</td>
            <td>{{phone}}</td>
            <td>
              <div class="d-flex">
                <form action="/admin/organiser/edit/{{orgId}}" method="GET">
                  <button type="submit" class="btn btn-sm btn-warning me-2">Edit</button>
                </form>
                <form
                  action="/admin/organiser/delete/{{orgId}}"
                  method="POST"
                  onsubmit="return confirm('Are you sure you want to delete this organiser?');"
                >
                  <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                </form>
              </div>
            </td>
          </tr>
          {{/organisers}} {{^organisers}}
          <tr>
            <td colspan="4" class="text-center">No organisers found</td>
          </tr>
          {{/organisers}}
        </tbody>
      </table>

      <table class="table table-striped">
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Address</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {{#users}}
          <tr>
            <td>{{name}}</td>
            <td>{{email}}</td>
            <td>{{phone}}</td>
            <td>{{address}}</td>
            <td>
              <div class="d-flex">
                <form
                  action="/admin/user/delete/{{userId}}"
                  method="POST"
                  onsubmit="return confirm('Are you sure you want to remove this user permanently?');"
                >
                  <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                </form>
              </div>
            </td>
          </tr>
          {{/users}} {{^users}}
          <tr>
            <td colspan="4" class="text-center">No users found</td>
          </tr>
          {{/users}}
        </tbody>
      </table>
    </div>

    {{> footer }}
    <script src="/node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
